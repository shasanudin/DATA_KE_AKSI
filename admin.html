<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login - DATA KE AKSI</title>
    <link rel="stylesheet" href="css/style login.css">
</head>
<body>
    <div class="login-container">
        <header>
            <h2 style="font-size: 1.2rem; border-bottom: 2px solid #007bff; padding-bottom: 10px; display: inline-block;">DATA KE AKSI</h2>
            <p style="color: #666; font-size: 0.9rem; margin: 15px 0;">Silakan masuk untuk akses dashboard</p>
        </header>
        
        <form id="loginForm">
            <div class="input-group">
                <input type="email" id="username" placeholder="Email Admin" required>
            </div>
            <div class="input-group">
                <input type="password" id="password" placeholder="Password" required>
            </div>
            <button type="submit" id="btnLogin">MASUK</button>
            <p id="message" style="margin-top: 10px; font-size: 0.85rem; font-weight: bold;"></p>
        </form>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getAuth, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

        const firebaseConfig = {
            apiKey: "AIzaSyAhQvRHBYX7dGW7QiSVN24cukmYHrN6d1c",
            authDomain: "data-ke-aksi-auth.firebaseapp.com",
            projectId: "data-ke-aksi-auth",
            storageBucket: "data-ke-aksi-auth.firebasestorage.app",
            messagingSenderId: "631382692174",
            appId: "1:631382692174:web:c10a099fb3021849eace1f",
            measurementId: "G-9NMBBB79EQ"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);

        const loginForm = document.getElementById('loginForm');
        const message = document.getElementById('message');
        const btn = document.getElementById('btnLogin');

        loginForm.addEventListener('submit', (e) => {
            e.preventDefault();
            
            btn.innerText = "Memverifikasi...";
            btn.disabled = true;

            const email = document.getElementById('username').value; 
            const pass = document.getElementById('password').value;

            signInWithEmailAndPassword(auth, email, pass)
                .then((userCredential) => {
                    message.style.color = "#28a745";
                    message.innerText = "Login Berhasil! Mengalihkan...";
                    setTimeout(() => {
                        window.location.href = "dashboard.html";
                    }, 1000);
                })
                .catch((error) => {
                    btn.innerText = "MASUK";
                    btn.disabled = false;
                    message.style.color = "#dc3545";
                    
                    // Pesan error Firebase yang lebih spesifik
                    if (error.code === 'auth/invalid-credential') {
                        message.innerText = "Email atau Password salah!";
                    } else {
                        message.innerText = "Akses ditolak: Periksa koneksi atau akun.";
                    }
                    console.error(error.message);
                });
        });
    </script>
</body>
</html>
